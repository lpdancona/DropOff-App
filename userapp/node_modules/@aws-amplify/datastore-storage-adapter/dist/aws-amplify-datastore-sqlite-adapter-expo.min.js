!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("@aws-amplify/core"),require("@aws-amplify/datastore"),require("expo-file-system"),require("expo-sqlite")):"function"==typeof define&&define.amd?define("aws-amplify-datastore-storage-adapter",["@aws-amplify/core","@aws-amplify/datastore","expo-file-system","expo-sqlite"],t):"object"==typeof exports?exports["aws-amplify-datastore-storage-adapter"]=t(require("@aws-amplify/core"),require("@aws-amplify/datastore"),require("expo-file-system"),require("expo-sqlite")):e["aws-amplify-datastore-storage-adapter"]=t(e["@aws-amplify/core"],e["@aws-amplify/datastore"],e["expo-file-system"],e["expo-sqlite"])}(self,((e,t,r,n)=>(()=>{"use strict";var o={474:t=>{t.exports=e},62:e=>{e.exports=t},729:e=>{e.exports=r},809:e=>{e.exports=n}},i={};function a(e){var t=i[e];if(void 0!==t)return t.exports;var r=i[e]={exports:{}};return o[e](r,r.exports,a),r.exports}a.d=(e,t)=>{for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var s={};return(()=>{function e(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))}function t(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}function r(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function n(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a}function o(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(n(arguments[t]));return e}a.r(s),a.d(s,{default:()=>D});var i=a(474),u=a(62);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}var l=u.utils.USER,f=u.utils.isNonModelConstructor,d=u.utils.isModelConstructor;function p(e){if(null==e||["string","number","boolean"].includes(c(e)))return e;var t="object"===c(e)&&(Object.getPrototypeOf(e).constructor===Object||f(Object.getPrototypeOf(e).constructor)||d(Object.getPrototypeOf(e).constructor));return Array.isArray(e)||t?JSON.stringify(e):""+e}var h=function(e){if(!e.attributes||!e.attributes.length)return[];var t=e.attributes.find(u.isModelAttributeAuth);return t?t.properties.rules.filter((function(e){return e.ownerField||e.groupsField})).map((function(e){return e.ownerField||e.groupsField})).filter((function(t){return!Object.values(e.fields).find((function(e){return e.name===t}))})):[]};function v(e,t){var r=function(e){return Object.keys(e).map((function(e){return'"'+e+'"'})).join(", ")}(e),o=n(function(e){var t=Object.values(e).map(p);return[t.map((function(){return"?"})).join(", "),t]}(e),2);return['INSERT INTO "'+t+'" ('+r+") VALUES ("+o[0]+")",o[1]]}function m(e,t){var r=n(function(e){var t=[];return[Object.entries(e).filter((function(e){return"id"!==n(e,1)[0]})).map((function(e){var r=n(e,2),o=r[0],i=r[1];return t.push(p(i)),'"'+o+'"=?'})).join(", "),t]}(e),2);return['UPDATE "'+t+'" SET '+r[0]+" WHERE id=?",o(r[1],[e.id])]}function y(e,t){return['SELECT * FROM "'+t+'" WHERE "id" = ?',[e]]}var b={eq:"=",ne:"!=",le:"<=",lt:"<",ge:">=",gt:">"},w={beginsWith:"= 1",contains:"> 0",notContains:"= 0",between:"BETWEEN"},S=function(e){var t=e.field,r=e.operator,n=e.operand,o=function(e,t,r){if(null==r){if("eq"===t)return'"'+e+'" IS NULL';if("ne"===t)return'"'+e+'" IS NOT NULL'}return null}(t,r,n);if(o)return[o,[]];var i=b[r];if(i)return['"'+t+'" '+i+" ?",[n]];var a,s=w[r];if(s){var u=[];switch(r){case"between":a=['"'+t+'" '+s+" "+(u=n).map((function(e){return"?"})).join(" AND "),u];break;case"beginsWith":case"contains":case"notContains":a=['instr("'+t+'", ?) '+s,[n]];break;default:throw new Error("Cannot map predicate to a valid WHERE clause")}return a}};function E(e){var t=[],i=[];return function e(t,i,a){var s,c;if(void 0===i&&(i=[]),void 0===a&&(a=[]),(0,u.isPredicateGroup)(t)){var l=t.type,f=t.predicates,d="",p=!1;switch(l){case"not":p=!0;break;case"and":d="AND";break;case"or":d="OR";break;default:throw new Error("Invalid "+l)}var h=[];try{for(var v=r(f),m=v.next();!m.done;m=v.next()){e(m.value,h,a)}}catch(e){s={error:e}}finally{try{m&&!m.done&&(c=v.return)&&c.call(v)}finally{if(s)throw s.error}}i.push((p?"NOT":"")+"("+h.join(" "+d+" ")+")")}else if((0,u.isPredicateObj)(t)){var y=n(S(t),2),b=y[0],w=y[1];i.push(b),a.push.apply(a,o(w))}}(e,t,i),["WHERE "+t.join(" "),i]}var g={ASCENDING:"ASC",DESCENDING:"DESC"};function T(e,t,r,i,a){var s='SELECT * FROM "'+e+'"',u=[];if(t&&t.predicates.length){var c=n(E(t),2),l=c[0],f=c[1];s+=" "+l,u.push.apply(u,o(f))}var d=function(e){void 0===e&&(e=[]);var t=e.map((function(e){var t=e.field,r=e.sortDirection;return'"'+t+'" '+g[r]}));return t.push("_rowid_ "+g.ASCENDING),"ORDER BY "+t.join(", ")}(r);if(s+=" "+d,i){var p=n(function(e,t){void 0===t&&(t=0);var r=[e],n="LIMIT ?";if(t){var o=e*t;r.push(o),n+=" OFFSET ?"}return[n,r]}(i,a),2),h=p[0],v=p[1];s+=" "+h,u.push.apply(u,o(v))}return[s,u]}function O(e,t){return['DELETE FROM "'+t+'" WHERE "id"=?',[e]]}var P=u.utils.traverseModel,N=u.utils.validatePredicate,x=u.utils.isModelConstructor,I=new i.ConsoleLogger("DataStore"),R=function(){function i(e){this.db=e}return i.prototype.setUp=function(r,n,i,a){return e(this,void 0,void 0,(function(){var e,s,c,f=this;return t(this,(function(t){switch(t.label){case 0:return this.initPromise?[3,1]:(this.initPromise=new Promise((function(e,t){f.resolve=e,f.reject=t})),[3,3]);case 1:return[4,this.initPromise];case 2:return t.sent(),[2];case 3:this.schema=r,this.namespaceResolver=n,this.modelInstanceCreator=i,this.getModelConstructorByModelName=a,t.label=4;case 4:return t.trys.push([4,7,,8]),e=Object.values(this.schema.namespaces.user.models).some((function(e){return Object.values(e.fields).some((function(e){var t;return null===(t=e.association)||void 0===t?void 0:t.hasOwnProperty("targetNames")}))})),e&&I.error("The SQLite adapter does not support schemas using custom primary key. Set `graphQLTransformer.respectPrimaryKeyAttributesOnConnectionField in `amplify/cli.json` to false to disable custom primary key. To regenerate your API, add or remove an empty newline to your GraphQL schema (to change the computed hash) then run `amplify push`."),[4,this.db.init()];case 5:return t.sent(),d=this.schema,s=Object.keys(d.namespaces).flatMap((function(e){var t=d.namespaces[e],r=e===l;return Object.values(t.models).map((function(e){return function(e,t){void 0===t&&(t=!1);var r=h(e),n=Object.values(e.fields).reduce((function(t,r){if((0,u.isGraphQLScalarType)(r.type)){if("id"===r.name)return o(t,['"id" PRIMARY KEY NOT NULL']);var n='"'+r.name+'" '+function(e){switch(e){case"Boolean":case"Int":case"AWSTimestamp":return"INTEGER";case"ID":case"String":case"AWSDate":case"AWSTime":case"AWSDateTime":case"AWSEmail":case"AWSJSON":case"AWSURL":case"AWSPhone":case"AWSIPAddress":return"TEXT";case"Float":return"REAL";default:throw new Error("unknown type "+e)}}(r.type);return r.isRequired&&(n+=" NOT NULL"),o(t,[""+n])}if((0,u.isModelFieldType)(r.type)){var i='"'+r.name+'" TEXT';if((0,u.isTargetNameAssociation)(r.association)&&!Object.values(e.fields).find((function(e){var t;return e.name===(null===(t=null==r?void 0:r.association)||void 0===t?void 0:t.targetName)}))){var a=r.isRequired?" NOT NULL":"";i+=', "'+r.association.targetName+'" TEXT'+a}return o(t,[""+i])}var s='"'+r.name+'" TEXT';return r.isRequired&&(s+=" NOT NULL"),o(t,[""+s])}),[]);return r.forEach((function(e){n.push(e+" TEXT")})),t&&(n=o(n,['"_version" INTEGER','"_lastChangedAt" INTEGER','"_deleted" INTEGER'])),'CREATE TABLE IF NOT EXISTS "'+e.name+'" ('+n.join(", ")+");"}(e,r)}))})),[4,this.db.createSchema(s)];case 6:return t.sent(),this.resolve(),[3,8];case 7:return c=t.sent(),this.reject(c),[3,8];case 8:return[2]}var d}))}))},i.prototype.clear=function(){return e(this,void 0,void 0,(function(){return t(this,(function(e){switch(e.label){case 0:return[4,this.db.clear()];case 1:return e.sent(),this.initPromise=void 0,[2]}}))}))},i.prototype.save=function(o,i){var a,s;return e(this,void 0,void 0,(function(){var e,c,l,f,d,p,h,b,w,S,E,g,T,O,x,R,C,j,A,L,D,M,q,F,W,_,k,B;return t(this,(function(t){switch(t.label){case 0:return e=Object.getPrototypeOf(o).constructor,c=e.name,l=P(e.name,o,this.schema.namespaces[this.namespaceResolver(e)],this.modelInstanceCreator,this.getModelConstructorByModelName),f=Object.values(l).map((function(e){return{modelName:e.modelName,item:e.item,instance:e.instance}})),d=n(y(o.id,c),2),p=d[0],h=d[1],[4,this.db.get(p,h)];case 1:if(b=t.sent(),i&&b&&(w=u.ModelPredicateCreator.getPredicates(i),S=w.predicates,E=w.type,!N(b,E,S)))throw g="Conditional update failed",I.error(g,{model:b,condition:S}),new Error(g);T=[],O=new Set,t.label=2;case 2:t.trys.push([2,8,9,14]),x=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=r(e),t={},o("next"),o("throw"),o("return"),t[Symbol.asyncIterator]=function(){return this},t);function o(r){t[r]=e[r]&&function(t){return new Promise((function(n,o){!function(e,t,r,n){Promise.resolve(n).then((function(t){e({value:t,done:r})}),t)}(n,o,(t=e[r](t)).done,t.value)}))}}}(f),t.label=3;case 3:return[4,x.next()];case 4:return(R=t.sent()).done?[3,7]:(C=R.value,j=C.modelName,A=C.item,L=C.instance,D=A.id,M=n(y(D,j),2),q=M[0],F=M[1],[4,this.db.get(q,F)]);case 5:W=t.sent(),_=void 0===W?u.OpType.INSERT:u.OpType.UPDATE,k=W?m(L,j):v(L,j),D!==o.id&&_!==u.OpType.INSERT||(O.add(k),T.push([L,_])),t.label=6;case 6:return[3,3];case 7:return[3,14];case 8:return B=t.sent(),a={error:B},[3,14];case 9:return t.trys.push([9,,12,13]),R&&!R.done&&(s=x.return)?[4,s.call(x)]:[3,11];case 10:t.sent(),t.label=11;case 11:return[3,13];case 12:if(a)throw a.error;return[7];case 13:return[7];case 14:return[4,this.db.batchSave(O)];case 15:return t.sent(),[2,T]}}))}))},i.prototype.load=function(n,o,i){return e(this,void 0,void 0,(function(){var e,a,s,u,c=this;return t(this,(function(t){return e=this.schema.namespaces[n],a=e.relationships[o].relationTypes,s=a.map((function(e){return e.modelName})),u=this.getModelConstructorByModelName(n,o),0===s.length?[2,i.map((function(e){return c.modelInstanceCreator(u,e)}))]:[2,i.map((function(e){var t,n;try{for(var o=r(a),i=o.next();!i.done;i=o.next())delete e[i.value.fieldName]}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return c.modelInstanceCreator(u,e)}))]}))}))},i.prototype.query=function(r,o,i){return e(this,void 0,void 0,(function(){var a,s,c,l,f,d,p,h,v=this;return t(this,(function(m){switch(m.label){case 0:return a=r.name,s=this.namespaceResolver(r),c=o&&u.ModelPredicateCreator.getPredicates(o),l=i&&i.sort&&u.ModelSortPredicateCreator.getPredicates(i.sort),f=i&&i.limit,d=f&&i.page,p=c&&this.idFromPredicate(c),[4,e(v,void 0,void 0,(function(){var e,r,o,i;return t(this,(function(t){switch(t.label){case 0:return p?[4,this.getById(a,p)]:[3,2];case 1:return[2,(e=t.sent())?[e]:[]];case 2:return r=n(T(a,c,l,f,d),2),o=r[0],i=r[1],[4,this.db.getAll(o,i)];case 3:return[2,t.sent()]}}))}))];case 1:return h=m.sent(),[4,this.load(s,r.name,h)];case 2:return[2,m.sent()]}}))}))},i.prototype.getById=function(r,o){return e(this,void 0,void 0,(function(){var e,i,a;return t(this,(function(t){switch(t.label){case 0:return e=n(y(o,r),2),i=e[0],a=e[1],[4,this.db.get(i,a)];case 1:return[2,t.sent()]}}))}))},i.prototype.idFromPredicate=function(e){var t=e.predicates,r=1===t.length&&t.find((function(e){return(0,u.isPredicateObj)(e)&&"id"===e.field&&"eq"===e.operator}));return r&&r.operand},i.prototype.queryOne=function(r,o){return void 0===o&&(o=u.QueryOne.FIRST),e(this,void 0,void 0,(function(){var e,i,a,s,c;return t(this,(function(t){switch(t.label){case 0:return e=r.name,i=n(function(e,t){return e===u.QueryOne.FIRST?["SELECT * FROM "+t+" ORDER BY _rowid_ LIMIT 1",[]]:["SELECT * FROM "+t+" ORDER BY _rowid_ DESC LIMIT 1",[]]}(o,e),2),a=i[0],s=i[1],[4,this.db.get(a,s)];case 1:return[2,(c=t.sent())&&this.modelInstanceCreator(r,c)]}}))}))},i.prototype.delete=function(r,i){return e(this,void 0,void 0,(function(){var e,a,s,c,l,f,d,p,h,v,m,b,w,S,g,P,R,C;return t(this,(function(t){switch(t.label){case 0:return x(r)?(l=r,e=this.namespaceResolver(l),f=l.name,v=i&&u.ModelPredicateCreator.getPredicates(i),p=T(f,v),R=function(e,t){var r='DELETE FROM "'+e+'"',i=[];if(t&&t.predicates.length){var a=n(E(t),2),s=a[0],u=a[1];r+=" "+s,i.push.apply(i,o(u))}return[r,i]}(f,v),[4,this.db.selectAndDelete(p,R)]):[3,3];case 1:return a=t.sent(),[4,this.load(e,l.name,a)];case 2:return[2,[s=t.sent(),s]];case 3:return c=r,l=Object.getPrototypeOf(c).constructor,f=l.name,i?(d=n(y(c.id,f),2),p=d[0],C=d[1],[4,this.db.get(p,C)]):[3,6];case 4:if(void 0===(h=t.sent()))return w="Model instance not found in storage",I.warn(w,{model:c}),[2,[[c],[]]];if(v=u.ModelPredicateCreator.getPredicates(i),m=v.predicates,b=v.type,!N(h,b,m))throw w="Conditional update failed",I.error(w,{model:h,condition:m}),new Error(w);return S=n(O(c.id,f),2),R=S[0],g=S[1],[4,this.db.save(R,g)];case 5:case 7:return t.sent(),[2,[[c],[c]]];case 6:return P=n(O(c.id,f),2),R=P[0],C=P[1],[4,this.db.save(R,C)]}}))}))},i.prototype.batchSave=function(n,o){return e(this,void 0,void 0,(function(){var e,i,a,s,c,l,f,d,p,h,b,w,S;return t(this,(function(t){switch(t.label){case 0:e=n.name,i=[],a=[],s=new Set,c=new Set,l=new Set,f=function(t){var r=P(n.name,d.modelInstanceCreator(n,t),d.schema.namespaces[d.namespaceResolver(n)],d.modelInstanceCreator,d.getModelConstructorByModelName),o=t.id,l=t._deleted,f=r.find((function(e){return e.instance.id===o})).instance;if(l){var p=O(f.id,e);c.add(p),i.push([t,u.OpType.DELETE])}else{var h=y(o,e);s.add(h),a.push(f)}},d=this;try{for(p=r(o),h=p.next();!h.done;h=p.next())b=h.value,f(b)}catch(e){w={error:e}}finally{try{h&&!h.done&&(S=p.return)&&S.call(p)}finally{if(w)throw w.error}}return[4,this.db.batchQuery(s)];case 1:return t.sent().forEach((function(t,r){if(void 0===t){var n=v(a[r],e);l.add(n),i.push([a[r],u.OpType.INSERT])}else{var o=m(a[r],e);l.add(o),i.push([a[r],u.OpType.UPDATE])}})),[4,this.db.batchSave(l,c)];case 2:return t.sent(),[2,i]}}))}))},i}(),C=a(729),j=a(809),A="AmplifyDatastore",L=new i.ConsoleLogger("ExpoSQLiteDatabase");const D=new R(new(function(){function r(){}return r.prototype.init=function(){return e(this,void 0,void 0,(function(){return t(this,(function(e){return this.db||(this.db=(0,j.openDatabase)(A)),[2]}))}))},r.prototype.createSchema=function(e){return this.executeStatements(e)},r.prototype.clear=function(){return e(this,void 0,void 0,(function(){var e;return t(this,(function(t){switch(t.label){case 0:return t.trys.push([0,3,,4]),L.debug("Clearing database"),[4,this.closeDB()];case 1:return t.sent(),[4,(0,C.deleteAsync)(C.documentDirectory+"SQLite/"+A)];case 2:return t.sent(),L.debug("Database cleared"),[3,4];case 3:return e=t.sent(),L.warn("Error clearing the database.",e),this.init(),[3,4];case 4:return[2]}}))}))},r.prototype.get=function(r,n){return e(this,void 0,void 0,(function(){return t(this,(function(e){switch(e.label){case 0:return[4,this.getAll(r,n)];case 1:return[2,e.sent()[0]]}}))}))},r.prototype.getAll=function(e,t){var r=this;return new Promise((function(n,o){r.db.readTransaction((function(r){r.executeSql(e,t,(function(e,t){n(t.rows._array||[])}),(function(e,t){return o(t),L.warn(t),!0}))}))}))},r.prototype.save=function(e,t){var r=this;return new Promise((function(n,o){r.db.transaction((function(r){r.executeSql(e,t,(function(){n(null)}),(function(e,t){return o(t),L.warn(t),!0}))}))}))},r.prototype.batchQuery=function(r){var i=this;return void 0===r&&(r=new Set),new Promise((function(a,s){i.db.transaction((function(u){return e(i,void 0,void 0,(function(){var e,i;return t(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,Promise.all(o(r).map((function(e){var t=n(e,2),r=t[0],o=t[1];return new Promise((function(e,t){u.executeSql(r,o,(function(t,r){e(r.rows._array[0])}),(function(e,r){return t(r),L.warn(r),!0}))}))})))];case 1:return e=t.sent(),a(e),[3,3];case 2:return i=t.sent(),s(i),L.warn(i),[3,3];case 3:return[2]}}))}))}))}))},r.prototype.batchSave=function(r,i){var a=this;return void 0===r&&(r=new Set),new Promise((function(s,u){a.db.transaction((function(c){return e(a,void 0,void 0,(function(){var e;return t(this,(function(t){switch(t.label){case 0:return t.trys.push([0,4,,5]),[4,Promise.all(o(r).map((function(e){var t=n(e,2),r=t[0],o=t[1];return new Promise((function(e,t){c.executeSql(r,o,(function(){e(null)}),(function(e,r){return t(r),L.warn(r),!0}))}))})))];case 1:return t.sent(),i?[4,Promise.all(o(i).map((function(e){var t=n(e,2),r=t[0],o=t[1];return new Promise((function(e,t){return c.executeSql(r,o,(function(){e(null)}),(function(e,r){return t(r),L.warn(r),!0}))}))})))]:[3,3];case 2:t.sent(),t.label=3;case 3:return s(null),[3,5];case 4:return e=t.sent(),u(e),L.warn(e),[3,5];case 5:return[2]}}))}))}))}))},r.prototype.selectAndDelete=function(r,o){var i=this,a=n(r,2),s=a[0],u=a[1],c=n(o,2),l=c[0],f=c[1];return new Promise((function(r,n){i.db.transaction((function(o){return e(i,void 0,void 0,(function(){var e,i;return t(this,(function(t){switch(t.label){case 0:return t.trys.push([0,3,,4]),[4,new Promise((function(e,t){o.executeSql(s,u,(function(t,r){e(r.rows._array||[])}),(function(e,r){return t(r),L.warn(r),!0}))}))];case 1:return e=t.sent(),[4,new Promise((function(e,t){o.executeSql(l,f,(function(){e(null)}),(function(e,r){return t(r),L.warn(r),!0}))}))];case 2:return t.sent(),r(e),[3,4];case 3:return i=t.sent(),n(i),L.warn(i),[3,4];case 4:return[2]}}))}))}))}))},r.prototype.executeStatements=function(r){var n=this;return new Promise((function(o,i){n.db.transaction((function(a){return e(n,void 0,void 0,(function(){var e;return t(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,Promise.all(r.map((function(e){return new Promise((function(t,r){a.executeSql(e,[],(function(){t(null)}),(function(e,t){return r(t),!0}))}))})))];case 1:return t.sent(),o(null),[3,3];case 2:return e=t.sent(),i(e),L.warn(e),[3,3];case 3:return[2]}}))}))}))}))},r.prototype.closeDB=function(){return e(this,void 0,void 0,(function(){return t(this,(function(e){switch(e.label){case 0:return this.db?(L.debug("Closing Database"),[4,this.db._db.close()]):[3,2];case 1:e.sent(),L.debug("Database closed"),this.db=void 0,e.label=2;case 2:return[2]}}))}))},r}()))})(),s})()));
//# sourceMappingURL=aws-amplify-datastore-sqlite-adapter-expo.min.js.map